<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <title>Semantic version parser in C++ | Marko Živanović</title> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <meta name="keywords" content="c++,dev"> <meta name="description" content="C++14 library for parsing and comparing semantic versioning 2.0.0 version strings."> <meta property="og:type" content="article"> <meta property="og:title" content="Semantic version parser in C++"> <meta property="og:url" content="http://marko.zivanovic.in.rs/2015/11/25/semver_parser_cpp/index.html"> <meta property="og:site_name" content="Marko Živanović"> <meta property="og:description" content="C++14 library for parsing and comparing semantic versioning 2.0.0 version strings."> <meta property="og:updated_time" content="2015-11-25T14:36:24.000Z"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="Semantic version parser in C++"> <meta name="twitter:description" content="C++14 library for parsing and comparing semantic versioning 2.0.0 version strings."> <link rel="icon" href="/favicon.ico"> <link rel="stylesheet" href="/css/style.css" type="text/css"> <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css"> <link rel="stylesheet" href="/scrollLoading/style.css" type="text/css"> <link href="//fonts.googleapis.com/css?family=Titillium+Web:300,400,600" rel="stylesheet" type="text/css"> <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"> <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css"> </head></html> <body> <div id="wrap"> <header id="header"> <div id="header-outer" class="outer"> <div class="container"> <div class="container-inner"> <div id="header-title"> <h1 class="title-wrap"> <p class="title"> <a href="/">Marko Živanović</a> </p> </h1> <h2 class="subtitle-wrap"> <p class="subtitle">blog</p> </h2> <span class="quote"> First, solve the problem. Then, write the code.<br> — John Johnson </span> </div> <div id="header-inner" class="nav-container"> <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a> <div class="nav-container-inner"> <ul id="main-nav"> <li class="main-nav-list-item"><a class="main-nav-list-link" href="/">Home</a></li> </ul> <nav id="sub-nav"> <div id="search-form-wrap"> <form action="//google.com/search" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://marko.zivanovic.in.rs"></form> </div> </nav> </div> </div> </div> </div> </div> </header> <div class="container"> <div class="main-body container-inner"> <div class="main-body-inner"> <section id="main"> <div class="main-body-header"> <h1 class="header">Semantic version parser in C++</h1> </div> <div class="main-body-content"> <article id="post-semver_parser_cpp" class="article article-single article-type-post" itemscope itemprop="blogPost"> <div class="article-inner"> <header class="article-header"> <h1 class="article-title" itemprop="name"> Semantic version parser in C++ </h1> </header> <p class="article-byline"> <a href="/2015/11/25/semver_parser_cpp/" class="article-date"> <time datetime="2015-11-25T14:36:24.000Z" itemprop="datePublished">2015-11-25</time> </a> </p> <div class="article-entry" itemprop="articleBody"> <h1 id="TL;DR">TL;DR</h1><ul> <li>C++14 library for parsing and comparing semantic versioning 2.0.0 (semver200) version strings;</li> <li>Git repo: <a href="https://github.com/zmarko/semver" target="_blank" rel="external">https://github.com/zmarko/semver</a>;</li> <li>Used in production; thoroughly unit tested;</li> <li>MIT license;</li> <li>Flexible design.</li> </ul> <h1 id="Introduction">Introduction</h1><p>One of the projects I’m working on (a security monitoring agent) consists of two principal components: an <em>engine</em> that does the actual work and the <em>service</em> that handles startup, shutdown, updates, etc. The service component is expected to be stable and only infrequently updated, while the engine undergoes continuous development and deployment of new versions. As with all such loosely coupled systems, I need a way for different components to know if they can “talk” to each other, i.e. if the public interface between them is not changed.</p> <p>This is exactly the situation <a href="http://semver.org/" target="_blank" rel="external">semantic versioning</a> specification is designed to help address.</p> <p>Not wanting to re-invent the wheel, I start searching Google, GitHub, etc. for C++ (the language the software is being written in) library that can parse and compare semantic version strings. Requirements are really simple:</p> <ul> <li>correct implementation of semantic versioning 2.0.0 specification;</li> <li>no external dependencies.</li> </ul> <p>Even though the search came up with a few candidates, none of them fit these requirements, so, off I went rolling my own.</p> <p>The results of the effort can be accessed here: <a href="https://github.com/zmarko/semver" target="_blank" rel="external">https://github.com/zmarko/semver</a>.<br>The code is written in C++14, uses only STL and is released under business-friendly MIT license. It consists of a handful of header and source files and comes with <a href="https://cmake.org/" target="_blank" rel="external">CMake</a> project files that build the library and run a bunch of unit tests.</p> <h1 id="Usage">Usage</h1><p>All the complexities of string parsing and version comparison according to semver200 specification are hidden behind, hopefully, easy-to-use facade. Comparing version strings should be as easy as:</p> <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">"semver200.h"</span></span></span><br><span class="line">...</span><br><span class="line">version::<span class="function">Semver200_version <span class="title">v1</span><span class="params">(<span class="string">"1.0.0"</span>)</span></span>;</span><br><span class="line">version::<span class="function">Semver200_version <span class="title">v2</span><span class="params">(<span class="string">"2.0.0"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (v2 &gt; v1) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; v2 &lt;&lt; <span class="string">" is indeed greater than "</span> &lt;&lt; v1 &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"This thing is broken, what a waste of time!"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>It is also possible to access individual version fields:<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">"semver200.h"</span></span></span><br><span class="line">...</span><br><span class="line">version::<span class="function">Semver200_version <span class="title">v</span><span class="params">(<span class="string">"1.2.3-alpha.1+build.no.123"</span>)</span></span>;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Major: "</span> &lt;&lt; v.major() &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Minor: "</span> &lt;&lt; v.minor() &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Patch: "</span> &lt;&lt; v.patch() &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Pre-release: "</span> &lt;&lt; v.prerelease() &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Build: "</span> &lt;&lt; v.build() &lt;&lt; <span class="built_in">std</span>::endl;</span><br></pre></td></tr></table></figure></p> <p>and the output should be:<br><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Major</span>: <span class="string">1</span></span><br><span class="line"><span class="attribute">Minor</span>: <span class="string">2</span></span><br><span class="line"><span class="attribute">Patch</span>: <span class="string">3</span></span><br><span class="line"><span class="attribute">Pre-release</span>: <span class="string">alpha.1</span></span><br><span class="line"><span class="attribute">Build</span>: <span class="string">build.no.123</span></span><br></pre></td></tr></table></figure></p> <h1 id="Building">Building</h1><p>The code should build with any C++14-compatible compiler. I have tested it on following platforms:</p> <ul> <li>Microsoft Visual Studio 2015</li> <li>GCC 5.1.1</li> <li>Clang 3.7.0</li> </ul> <p>Library itself does not have any external dependencies. Unit tests that verify the library work as expected, on the other hand, depend on the <a href="http://www.boost.org/doc/libs/1_59_0/libs/test/doc/html/index.html" target="_blank" rel="external">Boost.Test</a> library. If you do not have and do not want to install Boost.Test, then comment out appropriate section of CMakeLists.txt file.</p> <p>The project comes with CMake project files. In order to build semver library you should:</p> <ul> <li>create, if it doesn’t already exist, directory <code>build</code> in the project directory;</li> <li>invoke <code>cmake ..</code> in <code>build</code> directory;</li> <li>once CMake is done, use your toolset (Visual Studio, nmake, make, …) to build the library;</li> <li>remember to link in the library you have built and to include <code>./include</code> directory to your build.</li> </ul> <h1 id="Advanced_usage">Advanced usage</h1><p>Under the hood, the library builds on two major abstractions: <strong>parser</strong> and <strong>comparator</strong>. As you can, probably, guess by the names, parser, well, parses strings into <code>Version_data</code> structure and comparator performs comparison of two instances of this structure.</p> <p>The library comes with semantic versioning 2.0.0 compatible implementations of these interfaces, but, you can write your own parser, comparator or both.</p> <p>You can check <code>semver200.h</code> header file for signatures and <code>Semver200_comparator.cpp</code> and <code>Semver200_parser.cpp</code> for implementations.</p> <h1 id="Conclusion">Conclusion</h1><p>I’d love to hear from you whether you are using this code or you have any comment, issue, bug report or anything else to say on this subject. You can use either comment here or file an <a href="https://github.com/zmarko/semver/issues" target="_blank" rel="external">issue</a>.</p> </div> <footer class="article-footer"> <a data-url="http://marko.zivanovic.in.rs/2015/11/25/semver_parser_cpp/" data-id="ciheunza00000bqzrbj1ua86y" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<a href="http://marko.zivanovic.in.rs/2015/11/25/semver_parser_cpp/#comments" class="article-comment-link"><i class="fa fa-comments"></i>Comments</a> <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dev/">dev</a></li></ul> </footer> </div> </article> <section id="comments"> <div id="disqus_thread"> <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </section> </div> </section> <aside id="sidebar"> <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a> <div class="sidebar-top"> <p>follow:</p> <ul class="social-links"> <li><a class="social-tooltip" title="twitter" href="https://twitter.com/m_s_zivanovic" target="_blank"><i class="icon fa fa-twitter"></i></a></li> <li><a class="social-tooltip" title="github" href="https://github.com/zmarko" target="_blank"><i class="icon fa fa-github"></i></a></li> <li><a class="social-tooltip" title="rss" href="/rss2.xml" target="_blank"><i class="icon fa fa-rss"></i></a></li> </ul> </div> <div class="widgets-container"> <div class="widget-wrap"> <h3 class="widget-title">recents</h3> <div class="widget"> <ul id="recent-post" class="no-thumbnail"> <li> <div class="item-inner"> <p class="item-category"></p> <p class="item-title"><a href="/2015/11/25/semver_parser_cpp/" class="title">Semantic version parser in C++</a></p> <p class="item-date"><time datetime="2015-11-25T14:36:24.000Z" itemprop="datePublished">2015-11-25</time></p> </div> </li> </ul> </div> </div> <div class="widget-wrap widget-list"> <h3 class="widget-title">archives</h3> <div class="widget"> <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">1</span></li></ul> </div> </div> <div class="widget-wrap widget-list"> <h3 class="widget-title">tags</h3> <div class="widget"> <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dev/">dev</a><span class="tag-list-count">1</span></li></ul> </div> </div> </div> </aside> </div> </div> </div> <footer id="footer"> <div class="container"> <div class="container-inner"> <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a> <div class="credit"> <p>&copy; 2015 Marko Živanović</p> <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p> </div> </div> </div> </footer> <script>var disqus_shortname="markozivanovic",disqus_url="http://marko.zivanovic.in.rs/2015/11/25/semver_parser_cpp/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script><script src="/scrollLoading/jquery.scrollLoading.js" type="text/javascript"></script><script src="/scrollLoading/main.js" type="text/javascript"></script><script src="/js/html-patch.js" type="text/javascript"></script><script src="/js/script.js" type="text/javascript"></script></div></body>